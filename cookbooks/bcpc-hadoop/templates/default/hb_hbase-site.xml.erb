<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
################################################
#
#              Generated by Chef
#
################################################
-->
<configuration>
  <property>
    <name>hbase.rootdir</name>
    <value>hdfs://<%= node.chef_environment %>/hbase</value>
  </property>
  <property>
    <name>hbase.zookeeper.quorum</name>
    <value><%= @zk_hosts.map{ |s| float_host(s[:hostname]) + ":#{node[:bcpc][:hadoop][:zookeeper][:port]}" }.join(",") %></value> 
  </property>
  <property>
    <name>hbase.cluster.distributed</name>
    <value>true</value>
  </property>
  <property>
    <name>fail.fast.expired.active.master</name>
    <value><%= @master_hosts.length > 1 ? "true" : "false" %></value>
  </property>
  <property>
    <name>hbase.master.wait.on.regionservers.mintostart</name>
    <value><%= @rs_hosts.length/2+1 %></value>
  </property>
  <property>
    <name>hbase.regionserver.dns.interface</name>
    <value><%= node["bcpc"]["floating"]["interface"] %></value> 
  </property>
  <property>
    <name>hbase.master.dns.interface</name>
    <value><%= node["bcpc"]["floating"]["interface"] %></value> 
  </property>
  <property>
    <name>hbase.regionserver.ipc.address</name>
    <value><%= node["bcpc"]["floating"]["ip"] %></value> 
  </property>
  <property>
    <name>hbase.master.ipc.address</name>
    <value><%= node["bcpc"]["floating"]["ip"] %></value> 
  </property>
  <property>
    <name>hbase.regionserver.dns.nameserver</name>
    <value><%= @dns_server %></value> 
  </property>
  <property>
    <name>hbase.master.dns.nameserver</name>
    <value><%= @dns_server %></value> 
  </property>
  <property>
    <name>hbase.snapshot.enabled</name>
    <value>true</value>
  </property>
</configuration>
